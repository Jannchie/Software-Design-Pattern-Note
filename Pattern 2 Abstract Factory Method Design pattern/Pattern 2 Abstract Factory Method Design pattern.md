# Pattern 2 ： Abstract Factory Method Design pattern 抽象工厂设计模式

## Summary——概述

**抽象工厂设计模式**是工厂方法模式的进化版本。抽象工厂模式提供一个接口，用于创建相关或依赖对象的一系列产品，而不需要明确地指出具体类。

## When——何时使用抽象工厂设计模式

有时候我们需要生产成套的产品。比如说一部Iphone，它的外壳、主板、显示屏幕、CPU、内存等部件是由不同工厂制造的，这些部件可以归入一个**产品族**，或者称之为**产品系列**。当需要生产一个系列的产品然后使之组成一整个整体时，我们需要使用抽象工厂设计模式。

---

## Why——为什么要使用抽象工厂设计模式

抽象工厂模式能够更好地组织一个系列的产品使之构成一个整体。在很多情况下，我们的一个系统中存在多个产品族，但是这些产品族并不能混用，这是就需要使用抽象工厂设计模式生产一整套产品族的产品，使之成为部件组装成一整套产品。

### 抽象工厂模式的优点

当一个产品族中的多个对象被设计成一起工作时，它能保证客户端始终只使用同一个产品族中的对象。

---

## How——如何实现抽象工厂设计模式

抽象工厂设计模式的类图较为复杂。我们还是沿用上次讨论的工厂方法模式的类图（图1-1）。我们现在将汽车和汽车的配件分开，成为两个产品等级。再创建三个工厂，这些工厂分别负责生产三个不同品牌的汽车。

具体的实现类图如下所示：

<center>

![图2-1 实现抽象工厂设计模式](https://raw.githubusercontent.com/Jannchie/Software-Design-Pattern-Note/master/Pattern%202%20Abstract%20Factory%20Method%20Design%20pattern/2-1.png )

</center>

### 抽象工厂设计模式的缺吃、
抽象工厂设计模式虽然能够更好的处理多个对象的实例化过程，但使用它也暴露出一些缺陷：

**抽象工厂设计模式并不能完全满足开闭原则。**

当我们需要新添加一个产品族的时候，抽象工厂模式是符合开闭原则的。我们只需要添加一个工厂就可以了。然而当我们需要添加一个新的产品层次类时，比如说上文提到的汽车工厂的系统，我现在需要添加一个导航仪部件，这时候，我们不得不修改已经存在的实类，在旧有的工厂类中添加获取导航仪的方法。此时系统并不满足开闭原则。

---

## 结语

 抽象工厂模式提供一个接口，用于创建相关或依赖对象的一系列产品，而不需要明确地指出具体类。抽象工厂模式有着不能完全符合开闭原则的缺陷，在使用时一定要注意。如果考虑到产品的层次类会有所变动的话，则无法使用抽象工厂模式。