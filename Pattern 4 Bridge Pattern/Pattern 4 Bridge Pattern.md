## Pattern 4: Bridge Pattern  桥接模式

### Summary——概述

**桥接模式**（Bridge Pattern）是一种结构型模式，桥接模式完成了将抽象部分与实现部分分离，使它们都可以独立的变化。桥接模式将继承关系转化成关联关系，实现应对一个可以向多种方向变化的类。使用之**既可以满足开闭原则，又可以满足单一职责原则。**

---

### Example——一个桥接的例子

桥接这么名字并不是随便取的。桥的作用是将两边联通起来，也就是在两个类之间搭起一座桥梁使之能够沟通。

举一个简单的生活中使用桥接的例子。比如有一个奶茶店，可以制作不同的饮品。其中包括奶茶、奶绿、奶盖等。同时每一种饮品中还有大杯中杯小杯等等。将他们组合在一起，称之为桥接。

### Why——为什么要使用桥接

传统情况下，当一个类有多个变化因素的时候，我们会考虑使用多个继承：

<center>

！[图4-1 传统继承](https://raw.githubusercontent.com/Jannchie/Software-Design-Pattern-Note/master/Pattern%204%20Bridge%20Pattern/4-1.png)

</center>

此时这个模型可以看出能够满足开闭原则。但是却做不到单一职责原则：此时饮品类中含有两类变量，也就是有两类变化的因素。在这种情况下，如果需要添加一种饮品，则需要同时在两种规格的饮料下添加多个类，造成类数量的膨胀。况且不同规格的饮料由于饮料类型相同所以处理工序也比较类似，如此处理必会造成系统中存在许多冗余的代码。因此我们希望对其进行分离。这个时候，就需要桥接模式。

### How——如何实现桥接

使用桥接的模式类图如下：

！[图4-2 桥接模式](https://raw.githubusercontent.com/Jannchie/Software-Design-Pattern-Note/master/Pattern%204%20Bridge%20Pattern/4-2.png)

上图可以看出，抽象类与实现的接口属于“Has-a”关系。即抽象类拥有一个实现的接口。在这种情况下，就可以做到抽象与实现的分离。不仅可以添加各种各样不同的具体实现，也可以增加多种原来抽象类的子类，这两种变化不会互相干扰各自实现。

应用到前述的奶茶系统中，类图修改如下：

<center>

！[图4-3 奶茶类图](https://raw.githubusercontent.com/Jannchie/Software-Design-Pattern-Note/master/Pattern%204%20Bridge%20Pattern/4-3.png)

</center>

#### 使用适配器的优点

- 分离抽象接口及其实现部分。提出了比继承更好的解决方案。

- 桥接模式提高了系统的可扩充性，在两个变化维度中任意扩展一个维度，都不需要修改原有系统。

- 既可以满足开闭原则，又可以满足单一职责原则。

---

### 结语

桥接模式将继承关系转化成关联关系，从而应对一个可以向多种方向变化的类。它同时满足了开闭原则以及单一职责原则，是一种非常优秀的设计模式。在其中也可以看到组合的优越性，证明了“多用组合，少用继承”这一句名言的正确性。